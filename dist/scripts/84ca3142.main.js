"use strict";function save(){try{if("undefined"==typeof localStorage)alert("Your browser does not support HTML5 localStorage. Try upgrading.");else try{window.localStorage.setItem("currency",totalCurrency.toString()),window.localStorage.setItem("cps",CPS.toString()),window.localStorage.setItem("inventory",ko.toJSON(appView)),window.localStorage.setItem("totalClicks",appView.player.totalClicks()),window.localStorage.setItem("totalMoneySpent",appView.player.totalMoneySpent())}catch(a){a===QUOTA_EXCEEDED_ERR&&alert("Quota exceeded!")}}catch(a){window.status=a.message}lastSave=new Date}function load(){try{if(window.status="loading...","undefined"!=typeof localStorage){var a=parseInt(window.localStorage.getItem("currency")),b=parseFloat(window.localStorage.getItem("cps")),c=window.localStorage.getItem("inventory"),d=parseInt(window.localStorage.getItem("totalClicks")),e=parseInt(window.localStorage.getItem("totalMoneySpent"));isNaN(e)||appView.player.totalMoneySpent(e),isNaN(a)||(totalCurrency=a),isNaN(b)||(CPS=b),isNaN(d)||appView.player.totalClicks(d),c.length>10&&(appView.buttons=ko.observableArray([]),loadKoData(JSON.parse(c).buttons))}else window.status="ELSE";window.status=""}catch(f){window.status=f.message}}function reset(){totalCurrency=0,CPS=0,appView.player.totalClicks(0),appView.player.totalMoneySpent(0),window.localStorage.clear(),resetKoData(),save(),window.location.reload()}function cheat(){totalCurrency+=5e6,save(),updateMoney(),window.location.reload()}function mouseDown(a){var b=1;appView.player.totalClicks()>200&&(lastClicksPerSecond>8?b=6:lastClicksPerSecond>7?b=5:lastClicksPerSecond>6?b=4:lastClicksPerSecond>5?b=3:lastClicksPerSecond>4&&(b=2)),showClick(b,a),$("#clickCover").removeClass("clickAnimationCircle").addClass("clickAnimationCircle"),showClick(b,a),$("#clickCover").removeClass("clickAnimationCircle").addClass("clickAnimationCircle"),appView.game.soundState()&&sound.play(),appView.player.addPlayerClickData(b),totalCurrency+=b}function mouseUp(){setTimeout(function(){$("#clickCover").removeClass("clickAnimationCircle")},150)}function showClick(a,b){var c=0,d=0;(b.clientX||b.clientY)&&document.documentElement&&null!=document.documentElement.scrollLeft&&(c=b.clientX+document.documentElement.scrollLeft,d=b.clientY+document.documentElement.scrollTop),(b.clientX||b.clientY)&&"CSS1Compat"==document.compatMode&&document.documentElement&&null!=document.documentElement.scrollLeft&&(c=b.clientX+document.documentElement.scrollLeft,d=b.clientY+document.documentElement.scrollTop),(b.pageX||b.pageY)&&(c=b.pageX,d=b.pageY),c-=15;var e=document.createElement("p");e.setAttribute("class","clickAnimationPlus"),e.setAttribute("style","top:"+d+"px;left:"+c+"px;"),e.innerHTML="$"+a,document.body.appendChild(e),setTimeout(destroyClick,600,e)}function destroyClick(a){document.body.removeChild(a)}function showPage(a){switch(console.log("showGame: "+a),a){case"credits":$("#about").removeClass("hidden"),$("#aboutMenu").addClass("active"),$("#game").addClass("hidden"),$("#gameMenu").removeClass("active"),$("#extras").addClass("hidden"),$("#extrasMenu").removeClass("active"),$("#animationDiv").addClass("hidden"),$("#animationDiv").removeClass("active");break;case"extras":$("#about").addClass("hidden"),$("#aboutMenu").removeClass("active"),$("#extras").removeClass("hidden"),$("#extrasMenu").addClass("active"),$("#game").addClass("hidden"),$("#gameMenu").removeClass("active"),$("#animationDiv").addClass("hidden"),$("#animationDiv").removeClass("active");break;case"game":default:$("#about").addClass("hidden"),$("#aboutMenu").removeClass("active"),$("#extras").addClass("hidden"),$("#extrasMenu").removeClass("active"),$("#game").removeClass("hidden"),$("#gameMenu").addClass("active"),$("#animationDiv").removeClass("hidden"),$("#animationDiv").addClass("active")}}function gameLoop(){appView.game.playerCash(totalCurrency),appView.game.CPS(CPS),requestAnimFrame(gameLoop);var a=new Date,b=a-lastSave;b>AUTO_SAVE_INTERVAL&&save()}function updateMoney(){var a=appView.player.totalClicks()-lastClicks;a>appView.player.highestClicksPerSecond()&&appView.player.highestClicksPerSecond(a),appView.player.lastClicksPerSecond(a),totalCurrency+=CPS,appView.game.playerCash(totalCurrency),lastClicks=appView.player.totalClicks(),lastClicksPerSecond=a,setTimeout(updateMoney,1e3)}function ItemButton(a,b,c,d,e,f,g,h,i,j){var k=this;k.name=a,k.price=ko.observable(b),k.cps=c,k.symbol=d,k.owned=ko.observable(e),k.basePrice=ko.observable(f),k.hasPlayerSeen=ko.observable(g),k.maxSellableItems=ko.observable(h),k.designer=i,k.attributionLink=j,k.formattedPrice=ko.computed(function(){if(k.owned()>=k.maxSellableItems())return"Sold out";var a=k.price(),b="",c=0;1e3>a?c=Math.round(10*a)/10:1e6>a?(c=a/1e3,b="K"):1e9>a?(c=a/1e6,b="M"):1e12>a?(c=a/1e9,b="B"):1e15>a&&(c=a/1e12,b="T");var d=(c+"").split(".");return d[1]&&(d[1]=d[1].substring(0,2),c=d[0]+"."+d[1]),d[1]&&"00"==d[1]&&(c=d[0]),"$"+c+b}),k.canAfford=ko.computed(function(){var a=appView.game.playerCash();return k.price()<=a?!0:!1}),k.affordProgressValue=ko.computed(function(){var a=appView.game.playerCash();return a/k.price()}),k.showProgress=ko.computed(function(){if(k.owned()>=k.maxSellableItems())return!1;var a=appView.game.playerCash();return a/k.price()<1?!0:!1}),k.inRange=ko.computed(function(){var a=appView.game.playerCash();return 10*k.cps<CPS&&k.owned()>=k.maxSellableItems()?!1:k.price()<=5*(a+10)||"true"===k.hasPlayerSeen()?(k.hasPlayerSeen("true"),!0):!1}),k.buyItem=function(){totalCurrency>=k.price()&&k.owned()<k.maxSellableItems()&&(totalCurrency-=k.price(),appView.player.totalMoneySpent(appView.player.totalMoneySpent()+k.price()),CPS+=k.cps,k.owned(k.owned()+1),k.price(k.basePrice()+.05*k.basePrice()*k.owned()))},k.sellItem=function(){if(k.owned()>0){var a=0;a=1===k.owned()?k.basePrice()+.05*k.basePrice()*k.owned()*.9:k.basePrice()+.9*(.05*k.basePrice()*k.owned()-1),totalCurrency+=a,k.owned(k.owned()-1),k.price(k.basePrice()+.05*k.basePrice()*k.owned()),CPS-=k.cps}}}function Data(a,b){var c=this;c.time=ko.observable(new Date),c.key=ko.observable(a),c.value=ko.observable(b)}function Game(){var a=this;a.playerCash=ko.observable(0),a.CPS=ko.observable(0),a.soundState=ko.observable(!1),a.formattedCPS=ko.computed(function(){return Math.round(10*a.CPS())/10===Math.round(a.CPS())?accounting.formatNumber(Math.round(10*a.CPS())/10,0,","):accounting.formatNumber(Math.round(10*a.CPS())/10,1,",")}),a.formattedPlayerCash=ko.computed(function(){return accounting.formatMoney(a.playerCash(),"$",0)})}function Player(a){var b=this;b.name=a,b.totalClicks=ko.observable(0),b.highestClicksPerSecond=ko.observable(0),b.lastClicksPerSecond=ko.observable(0),b.totalMoneySpent=ko.observable(0),b.totalItemsPurchased=ko.observable(0),b.clickData=ko.observableArray([]),b.addPlayerClickData=function(a){b.clickData.push(new Data("click",a)),b.totalClicks(b.totalClicks()+1)},b.formatTotalMoneySpent=ko.computed(function(){return accounting.formatMoney(b.totalMoneySpent(),"$",0)})}function resetKoData(){appView.buttons=ko.observableArray([]),loadKoData(clickItems)}function loadKoData(a){for(var b=0;b<a.length;b++)appView.buttons.push(new ItemButton(a[b].name,a[b].price,a[b].cps,a[b].symbol,a[b].owned,a[b].basePrice,a[b].hasPlayerSeen,a[b].maxSellableItems,a[b].designer,a[b].attributionLink))}function loadKoAttributionData(a,b){console.log("loading attributions");for(var c=0;c<a.length;c++)appView.attributions.push({symbol:a[c].symbol,designer:a[c].designer,attributionLink:a[c].attributionLink});for(var c=0;c<b.length;c++)appView.attributions.push({symbol:b[c].symbol,designer:b[c].designer,attributionLink:b[c].attributionLink})}var totalCurrency=0,CPS=0,lastSave=new Date,AUTO_SAVE_INTERVAL=4e3,lastClicks=0,lastClicksPerSecond=0,appView={};$(document).ready(function(){try{load(),ko.applyBindings(appView),requestAnimFrame(gameLoop),updateMoney()}catch(a){window.status=a.message}var b=document.getElementById("clickCover");b.addEventListener("mousedown",mouseDown,!1),b.addEventListener("mouseup",mouseUp,!1)}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();var playerStats={name:"",totalClicks:""},appView={buttons:ko.observableArray([]),attributions:ko.observableArray([]),game:new Game,player:new Player,playerCash:ko.observable(0),CPS:ko.observable(0),showAttribution:function(a){console.log("hit function: "+a.attributionLink),window.open(a.attributionLink)}},clickItems=[{name:"Caterpillar",price:10,cps:.1,symbol:"images/svg/caterpillar.svg",owned:0,basePrice:10,hasPlayerSeen:!1,maxSellableItems:20,designer:"Adam Mullin",attributionLink:"http://thenounproject.com/term/caterpillar/5721/"},{name:"Mouse",price:100,cps:1,symbol:"images/svg/mouse.svg",owned:0,basePrice:100,hasPlayerSeen:!1,maxSellableItems:30,designer:"Darrin Higgins",attributionLink:"http://thenounproject.com/term/mouse/27457/"},{name:"Chicken",price:1e3,cps:5,symbol:"images/svg/chicken.svg",owned:0,basePrice:1e3,hasPlayerSeen:!1,maxSellableItems:40,designer:"Adam Zubin",attributionLink:"http://thenounproject.com/term/chicken/33759/"},{name:"Cat",price:5e3,cps:10,symbol:"images/svg/cat.svg",owned:0,basePrice:5e3,hasPlayerSeen:!1,maxSellableItems:50,designer:"Lucie Parker",attributionLink:"http://thenounproject.com/term/cat/1836/"},{name:"Dog",price:13e3,cps:25,symbol:"images/svg/dog.svg",owned:0,basePrice:13e3,hasPlayerSeen:!1,maxSellableItems:60,designer:"Marta Michalowska",attributionLink:"http://thenounproject.com/term/dog/8126/"},{name:"Kangaroo",price:3e4,cps:50,symbol:"images/svg/kangaroo.svg",owned:0,basePrice:3e4,hasPlayerSeen:!1,maxSellableItems:70,designer:"Jennifer Cozzette",attributionLink:"http://thenounproject.com/term/kangaroo/13785/"},{name:"Octopus",price:1e5,cps:100,symbol:"images/svg/octopus.svg",owned:0,basePrice:1e5,hasPlayerSeen:!1,maxSellableItems:80,designer:"Jason Grube",attributionLink:"http://thenounproject.com/term/octopus/15331/"},{name:"Robot",price:15e5,cps:250,symbol:"images/svg/robot.svg",owned:0,basePrice:15e5,hasPlayerSeen:!1,maxSellableItems:90,designer:"Ricardo Moreira",attributionLink:"http://thenounproject.com/term/robot/11018/"}],media=[{symbol:"images/svg/coins.svg",attributionLink:"http://thenounproject.com/term/coins/7970/",designer:"Anton Håkanson"},{symbol:"images/svg/plus.svg",attributionLink:"http://thenounproject.com/term/plus/2875/",designer:"P.J. Onori"},{symbol:"images/svg/click.svg",attributionLink:"http://thenounproject.com/term/click/12280/",designer:"Rohan Gupta"},{symbol:"images/svg/tap.svg",attributionLink:"http://thenounproject.com/term/tap-and-hold/2936/",designer:"P.J. Onori"},{symbol:"images/svg/atm.svg",attributionLink:"http://thenounproject.com/term/atm/1422/",designer:"Andy Santos-Johnson "},{symbol:"images/svg/reset.svg",attributionLink:"http://thenounproject.com/term/refund/10938/",designer:"Mourad Mokrane"}];loadKoData(clickItems),loadKoAttributionData(clickItems,media);